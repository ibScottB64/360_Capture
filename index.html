<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>360 Room Scan</title>
    <style>
        /* --- Basic Setup & Theming --- */
        :root {
            --primary-bg: #FFFFFF;
            --secondary-bg: #EAEAF0; /* Light gray for background elements */
            --camera-bg: #C5C6E0; /* Light purple from mockup */
            --accent-color: #007BFF; /* A standard blue for buttons */
            --accent-text-color: #FFFFFF;
            --success-color: #28A745; /* Green for target */
            --text-color: #333333;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Critical: Prevents scrolling */
            font-family: var(--font-family);
            background-color: var(--secondary-bg);
        }

        /* --- Main App Container --- */
        /* This container simulates the phone screen and holds the entire UI */
        .app-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 450px; /* Looks good on desktop, full-width on mobile */
            height: 100dvh; /* Dynamic Viewport Height: accounts for mobile browser UI */
            margin: 0 auto;
            background-color: var(--primary-bg);
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* --- Header --- */
        .app-header {
            padding: 12px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text-color);
            border-bottom: 1px solid var(--secondary-bg);
        }

        /* --- Main Content Layout --- */
        /* This area holds the camera view and the side control panel */
        .main-content {
            flex-grow: 1; /* Takes up all available vertical space */
            display: flex;
            padding: 10px;
            gap: 10px;
            min-height: 0; /* Prevents flex children from overflowing */
        }

        /* --- Camera View and its child elements --- */
        .camera-view {
            flex-grow: 1;
            position: relative; /* For positioning the target overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--camera-bg);
            border-radius: 8px;
            overflow: hidden; /* In case any child elements try to escape */
        }
        
        .target {
            /* This is the green 'A' the user aligns with */
            width: 80px;
            height: 80px;
            background-color: var(--success-color);
            color: var(--accent-text-color);
            font-size: 4rem;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            /* In a live app, this would be moved by device orientation */
        }
        
        /* The alignment helper is hidden in this static view but would be styled similarly */
        .alignment-helper {
            display: none; 
            /* It would be positioned absolutely and change color/opacity */
        }

        /* --- Control Panel (Side buttons) --- */
        .control-panel {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-button {
            width: 100px;
            padding: 15px 10px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background-color: var(--accent-color);
            color: var(--accent-text-color);
            transition: background-color 0.2s;
        }

        .control-button:hover {
            background-color: #0056b3;
        }
        
        /* The main Start/Pause button would be here or overlayed in other states */
        .main-action-button {
            display: none; /* Hidden in the "Complete" state */
        }

        /* --- Progress Display --- */
        .progress-display {
            display: flex;
            gap: 5px;
            padding: 10px;
            background-color: var(--secondary-bg);
            border-radius: 8px;
            margin: 0 10px; /* Align with main content padding */
        }

        .progress-frame {
            flex-grow: 1;
            height: 15px;
            background-color: #D0D0D0; /* Empty frame color */
            border-radius: 4px;
        }

        .progress-frame.captured {
            background-color: #A0A0C0; /* Filled frame color */
        }

        /* --- Application Status --- */
        .app-status {
            padding: 15px;
            text-align: center;
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--text-color);
        }
    </style>
</head>
<body>

    <div class="app-container">
        
        <header class="app-header">
            360 Room Scan
        </header>

        <div class="main-content">
            <div class="camera-view">
                <!-- In a live app, this would show the camera stream -->
                <div class="target">A</div>
                <!-- The alignment helper 'A' would also be here, moving with the phone -->
            </div>

            <div class="control-panel">
                <!-- These buttons are shown in the "Complete" state -->
                <button class="control-button" id="rescan-btn">Rescan</button>
                <button class="control-button" id="submit-btn">Submit</button>
            </div>
        </div>

        <div class="progress-display">
            <!-- Simulating a nearly complete scan -->
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame captured"></div>
            <div class="progress-frame"></div> <!-- One empty slot -->
        </div>

        <footer class="app-status">
            Complete
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log("360 Room Scan UI Loaded. Static version 1.0.");

            // --- PHASE 1 COMPLETE ---
            // This is a static representation. The sections below are placeholders
            // for the functionality we will build in the next phases.

            // --- TODO: PHASE 2 (Pre-Scan Alignment) ---
            // 1. Access device orientation sensors (DeviceOrientationEvent).
            // 2. Get user permission for sensors.
            // 3. Update the 'Alignment Helper' position and color based on sensor data.
            // 4. Change the 'Start' button from disabled to enabled when aligned.
            // 5. Handle cases where sensor access is denied or not available.

            // --- TODO: PHASE 3 (Scanning Process) ---
            // 1. On 'Start', get user permission for the camera (`getUserMedia`).
            // 2. Stream the camera feed to a <video> element (to be placed inside .camera-view).
            // 3. Implement the scanning loop:
            //    - Guide user to the next capture angle (e.g., "turn right").
            //    - When the phone is aligned correctly, automatically capture a frame from the video stream.
            //    - Draw the captured frame to a canvas to create a JPEG blob.
            //    - Store the blob (e.g., in an array or IndexedDB).
            //    - Update the .progress-display to show the new captured frame.
            //    - "Flash" the screen white to indicate a successful capture.
            // 4. Implement 'Pause' and 'Rescan' functionality.
            
            // --- TODO: PHASE 4 (Submission) ---
            // 1. On 'Submit', iterate through all the stored image blobs.
            // 2. As per our discussion, upload each image individually as a JPEG.
            // 3. Use the Fetch API to send POST requests to the (yet to be defined) server endpoint.
            // 4. Show an uploading progress indicator.
            // 5. Handle successful upload and any potential network errors.

        });
    </script>

</body>
</html>
